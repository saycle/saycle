<article ng-controller="storyDetailCtrl as vm">
    <div>
        <h3>{{vm.id}}</h3>
        <h1>{{vm.story.title}}</h1>
    </div>
    <div>
        <div class="panel panel-default">
            <div class="panel-heading">Autor: {{vm.story.username}}, Erstelldatum: {{vm.story.date | date: 'dd.MM.yyyy HH:mm'}}</div>
            <div class="panel-body">
                <span id="story-content" ng-repeat="cycle in vm.story.cycles">
                    <a href="#" class="cycle-item" tooltip-placement="bottom" uib-tooltip="Autor: {{cycle.username}} ({{cycle.date | date: 'dd.MM.yyyy HH:mm'}})">
                        {{cycle.text}}
                    </a>
                </span>
                <span id="story-contribution" contenteditable="true" ng-keypress="vm.contributionKeypress()" data-started="{{vm.contribution.started}}">Füge hier deine spannende Erweiterung an.</span>
            </div>
            <div class="panel-footer clearfix">
                <div class="pull-right">
                    <button ng-if="!vm.story.isLocked && !vm.isEditMode" id="cycleEditButton" class="btn btn-default" ng-click="vm.editStory(this)">Edit</button>
                    <button ng-if="vm.isEditMode" id="cycleSaveButton" class="btn btn-default" ng-click="vm.saveStory(this)">Save</button>
                </div>
            </div>
        </div>
    </div>
</article>